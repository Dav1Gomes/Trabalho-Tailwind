@page "/login"
@inject NavigationManager NavigationManager
@inject SessionService SessionService

<PageTitle>Login</PageTitle>

<div class="flex flex-col items-center justify-center min-h-screen bg-gray-100 p-4">
    <div class="bg-white p-8 rounded-xl shadow-md w-full max-w-md">
        <h1 class="text-2xl font-bold mb-6 text-center">Entrar</h1>

        @if (!string.IsNullOrEmpty(ErrorMessage))
        {
            <div class="bg-red-200 text-red-700 p-2 mb-4 rounded">
                @ErrorMessage
            </div>
        }

        <div class="flex flex-col gap-4">
            <input type="email" class="border rounded p-2" placeholder="Email" @bind="Email" />
            <input type="password" class="border rounded p-2" placeholder="Senha" @bind="Senha" />

            <button class="bg-red-500 hover:bg-red-600 text-white py-2 rounded" @onclick="LoginUsuario">
                Entrar
            </button>
        </div>
    </div>
</div>

@code {
    private string Email { get; set; } = "";
    private string Senha { get; set; } = "";
    private string ErrorMessage { get; set; }

    private async Task LoginUsuario()
    {
        if (Email == "usuario@email.com" && Senha == "123")
        {
            await SessionService.LoginAsync();
            NavigationManager.NavigateTo("/");
        }
        else
        {
            ErrorMessage = "Email ou senha incorretos!";
        }
    }
}
